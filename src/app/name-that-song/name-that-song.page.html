<ion-header>
  <ion-toolbar color="secondary">
    <ion-buttons slot="start">
      <ion-button (click)="cancel()" color="dark">
        <ion-icon slot="icon-only" name="arrow-back"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title color="dark" style="font-family: 'picas';">
      The Hustle
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="background">
  <ng-lottie *ngIf="state == 'song-playing'" style="display: block; margin: auto; width: 50%" [options]="options"
    (animationCreated)="animationCreated($event)">
  </ng-lottie>
  <ion-card color="primary" *ngIf="state == 'home'">
    <ion-card-header>
      <ion-card-title>Pick a Category</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list>
        <ion-item color="primary" button (click)="pickCategory('80')">
          The '80s
        </ion-item>
        <ion-item color="primary" button (click)="pickCategory('70')">
          The '70s
        </ion-item>
        <ion-item color="primary" button (click)="pickCategory('chart')">
          Top Charts
        </ion-item>
        <ion-item color="primary" button (click)="pickCategory('rock')">
          Rock
        </ion-item>
        <ion-item color="primary" button (click)="pickCategory('pop')">
          Pop
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>
  <ion-card color="primary" *ngIf="state == 'song-playing' || state == 'countdown'">
    <ion-card-header>
      <ion-card-subtitle>Playing as: </ion-card-subtitle>
      <ion-card-subtitle>Playing against: </ion-card-subtitle>
    </ion-card-header>
    <ion-card-content>
      <br>
      <ion-progress-bar color="secondary" *ngIf="timer > 0 && state == 'countdown'" value="{{(timer / 5)}}">
      </ion-progress-bar>
      <ion-progress-bar color="secondary" *ngIf="timer > 0 && state == 'song-playing'" value="{{(timer / 15)}}">
      </ion-progress-bar>
    </ion-card-content>
  </ion-card>
  <ion-card color="primary" *ngIf="state == 'song-stopped'">
    <ion-card-header>
      <ion-card-subtitle>Playing as: </ion-card-subtitle>
      <ion-card-subtitle>Playing against: </ion-card-subtitle>
    </ion-card-header>
    <ion-card-content>
      <span style="display: flex; justify-content: center; font-size: 20px;">Press the microphone and say the Song Title
        & Artist into your
        microphone using the format "-Song Title- by -Artist-"</span>
      <br>
      <span style="display: flex; justify-content: center; font-size: 15px;">This is what I understood: <br> <span
          *ngFor="let match of matches">{{match}}</span>
        <ion-progress-bar color="secondary" *ngIf="timer > 0 && state == 'song-stopped'" value="{{(timer / 10)}}">
        </ion-progress-bar>
    </ion-card-content>
  </ion-card>
  <ion-card color="primary" *ngIf="state == 'round-results'">
    <ion-card-header>
      <ion-card-subtitle>Song: {{gameData.tracks[round-1].title}}</ion-card-subtitle>
      <ion-card-subtitle>Artist: {{gameData.tracks[round-1].artist}}</ion-card-subtitle>
    </ion-card-header>
    <ion-card-content>
      {{answer}}
      <img src="gameData.tracks[round - 1].image">
      <br>
      <ion-button color="secondary" (click)="next()">Next</ion-button>
    </ion-card-content>
  </ion-card>

  <ion-fab vertical="bottom" horizontal="center">
    <ion-fab-button (click)="down()" *ngIf="!recording"
      [disabled]="!(state == 'song-playing' || state == 'song-stopped')">
      <ion-icon name="mic"></ion-icon>
    </ion-fab-button>
    <ion-fab-button (click)="up()" *ngIf="recording" color="danger"
      [disabled]="!(state == 'song-playing' || state == 'song-stopped')">
      <ion-icon name="mic-off"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</ion-content>